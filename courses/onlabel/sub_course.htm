<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <meta http-equiv="pragma" content="no-cache" />
    <meta http-equiv="expires" content="-1" />
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <link rel="stylesheet" href="css/bootstrap.min.css" />
    <link rel="stylesheet" media="screen" href="css/globals.css" />
    <link rel="stylesheet" media="screen" href="css/sub_components.css" />
    <link rel="stylesheet" media="screen" href="css/animations.css" />
    <script src="https://code.jquery.com/jquery-3.0.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

    <!--<script language="javascript" src="js/jquery-1.7.min.js"></script>-->
    <script language="javascript" src="js/int_none.js"></script>
    <script language="javascript" src="js/utils.js"></script>
    <script language="javascript" src="js/courseNavigator.js"></script>
    <script language="javascript">
        var nav;
        function loadSubCourse(filename, onCompleteCallback) {

            var d = filename.split(".");
            var menuFile = d[0] + ".xml";
            nav = new CourseNavigator(menuFile, "sub_settings.xml");
            //initialize
            $(nav).on(nav.COMPLETE, onCompleteCallback);

            $('#courseTitle').append(document.title);
            //register listeners
            nav.register(frames["subcontents"]);
            nav.register(frames["backNext"]);
            nav.register(frames["subaudio"]);
            nav.register(frames["transcript"]);
            nav.register(frames["transcriptButton"]);
            nav.writeToLog("SubCourse: files loaded.");
            nav.gotoPage(null);

            var labelClose = nav.settings.labelClose;
            $("#closeButton").attr("title", labelClose);
            $("#closeButton span").html(labelClose);

            if (nav.settings.showMediaPlayer == true && (parent.userSelectedAudio == true || parent.userSelectedAudio == undefined)) {
                $("#frameAudio").fadeIn("slow");
                $("#frameTranscriptButton").fadeIn("slow");
            }
        }
            
        function setPageTitle() { //required, but ignored 
        }
        function setChapterTitle() { //required, but ignored
        }

        function closeWin() {
            audioPause();
            parent.hideSubCourse();
            //frames["promptMessage"].closePrompt(true);
            //_root.updateGrid();
            //close transcript
            if (frames["transcript"].isOpen) {
                frames["transcript"].toggleTranscript();
            }
            //setTimeout(function() {
            //	parent.audioPlay();
            //}, 1000);
        }
        function toggleTranscript() {
            frames["transcript"].toggleTranscript();
        }
        //**********************************************
        //audio-related methods
        //**********************************************
        function addMediaEventListener(o) {
            window.frames["subaudio"].addAudioEventListener(o);
        }
        function setMp3Controller(file) {
            window.frames["subaudio"].playMP3File(file);
        }
        function audioPause() {
            window.frames["subaudio"].audioPause();
        }
        function audioPlay() {
            window.frames["subaudio"].audioPlay();
        }
        function pauseMedia() { // Finish functionality
            if (typeof frames.subcontents.pauseVideo === "function") frames.subcontents.pauseVideo(true);
        }
        //**********************************************
        // Call updateHotSpots to show check on HotSpots
        //**********************************************
        var HotSpotsFrame;
        function updateHotSpots() {
            if (HotSpotsFrame != undefined) {
                HotSpotsFrame.showCheck();
            }
        }
        var delayedDir;
        function slideContent(dir) {
            var cnt = document.getElementById("frameContents");
            delayedDir = dir;
            if (cnt.addEventListener && cnt.style.webkitTransition != undefined) {
                var dis = -dir * $(document).width();
                cnt.addEventListener("webkitTransitionEnd", resetLocation);
                cnt.style.webkitTransition = "all .5s ease-out";
                cnt.style.webkitTransform = "translateX(" + dis + "px)";
            }
            else {
                resetTransition();
            }

        }
        function resetLocation() {
            //window.frames["main"].document.location.href = "loading.htm";
            var cnt = document.getElementById("frameContents");
            cnt.removeEventListener("webkitTransitionEnd", resetLocation);
            window.frames["subcontents"].document.body.innerHTML = "";
            resetTransition();
        }
        function resetTransition() {
            var cnt = document.getElementById("frameContents");
            if (cnt.addEventListener && cnt.style.webkitTransition != undefined) {
                if (cnt.style.webkitTransition != "") {
                    cnt.style.webkitTransition = "";
                    cnt.style.webkitTransform = "translateX(0px)";
                    nav.gotoPage(this.delayedDir);
                }
            }
            else {
                nav.gotoPage(this.delayedDir);
            }
        }
        function isCourseComplete() {
            //called by module to find out if subcourse is complete
            if (nav == undefined) {
                return false;
            }
            else {
                if (nav.settings.gated == true) {
                    for (var i = 0; i < nav.allPages.length; i++) {
                        if (nav.allPages[i].completed == false) {
                            return false;
                        }
                    }
                }
            }
            return true;
        }     
    </script>
</head>
    <body>
		<div id="frameContents"><iframe src="loading.htm" scrolling="no" frameborder="0" id="subcontents" name="subcontents" width="100%" height="100%"></iframe></div>
	    <div id="subControlsBkgd"></div>
		<div id="closeButton" onclick="javascript:closeWin()"><span></span>
        	<img src="interface/popupClose3.png" width="24" height="24" border="0" class="faa-vertical animated" />
		</div>	
        <div id="frameTranscript"><iframe id="transcript" name="transcript" allowtransparency="true" src="transcript.htm" frameborder="0" width="100%" height="100%" scrolling="no"></iframe></div>
        <div id="bottomBar"></div>
         <div id="frameNav"><iframe id="backNext" name="backNext" src="back_next.htm" frameborder="0" width="100%" height="100%" scrolling="no" allowtransparency="true"></iframe></div>
        <div id="frameAudio"><iframe id="subaudio" name="subaudio" src="audio.htm" frameborder="0" width="100%" height="100%" scrolling="no" allowtransparency="true"></iframe></div>
        <div id="frameTranscriptButton"><iframe id="transcriptButton" allowtransparency="true" src="transcript_button.htm" frameborder="0" width="100%" height="100%" scrolling="no"></iframe></div>
    </body>
</html>